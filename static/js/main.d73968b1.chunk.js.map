{"version":3,"sources":["App.js","index.js","../../dist-modules/index.js","../../dist-modules/Profile.js"],"names":["App","accountId","Component","ReactDOM","render","document","getElementById","Object","defineProperty","exports","value","Profile","undefined","obj","_Profile","require","_Profile2","__esModule","default","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_react2","_interopRequireDefault","_metanearSdkJs","_propTypes2","propTypes","string","isRequired","defaultProfileUrl","displayName","profileUrl","bio","onFetch","func","forceShow","bool","_React$Component","instance","TypeError","_classCallCheck","this","_this","self","call","ReferenceError","_possibleConstructorReturn","__proto__","getPrototypeOf","state","loading","found","nearConfig","window","networkId","nodeUrl","walletUrl","profileComponentCache","profileCache","app","MetaNearApp","init","subClass","superClass","create","constructor","setPrototypeOf","_inherits","_this2","then","updateProfile","fn","_ref","mark","_callee","wrap","_context","prev","next","abrupt","sent","console","log","Promise","all","getFrom","values","catch","e","stop","gen","apply","arguments","resolve","reject","step","arg","info","error","done","err","_x","_this3","setState","fetchProfile","profile","prevProps","_this4","styles","createElement","style","className","role","title","profileImage","src","alt","profileName","profileDisplayName","profileAccountId","defaultProps","whiteSpace","display","height","width","borderRadius","verticalAlign","overflowY","marginLeft","color"],"mappings":"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","file":"static/js/main.d73968b1.chunk.js","sourcesContent":["import React, { Component } from 'react'\n\nimport { Profile } from 'metanear-react-components'\n\nexport default class App extends Component {\n  render () {\n    return (\n      <div>\n        <Profile accountId='eugenethedream' />\n      </div>\n    )\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Profile = undefined;\n\nvar _Profile = require('./Profile.js');\n\nvar _Profile2 = _interopRequireDefault(_Profile);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.Profile = _Profile2.default;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _metanearSdkJs = require('metanear-sdk-js');\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar propTypes = {\n  accountId: _propTypes2.default.string.isRequired,\n  defaultProfileUrl: _propTypes2.default.string,\n  displayName: _propTypes2.default.string,\n  profileUrl: _propTypes2.default.string,\n  bio: _propTypes2.default.string,\n  onFetch: _propTypes2.default.func,\n  forceShow: _propTypes2.default.bool\n};\n\nvar defaultProps = {\n  defaultProfileUrl: null,\n  styles: {\n    profile: {\n      whiteSpace: 'nowrap',\n      display: 'inline-block'\n    },\n    profileImage: {\n      height: '3em',\n      width: '3em',\n      borderRadius: '50%',\n      verticalAlign: 'middle'\n    },\n    profileName: {\n      overflowY: 'hidden',\n      marginLeft: '0.5em',\n      verticalAlign: 'middle'\n    },\n    profileDisplayName: {},\n    profileAccountId: {\n      color: '#999'\n    }\n  }\n};\n\nvar profileAppId = 'profile';\n\nvar Profile = function (_React$Component) {\n  _inherits(Profile, _React$Component);\n\n  function Profile(props) {\n    _classCallCheck(this, Profile);\n\n    var _this = _possibleConstructorReturn(this, (Profile.__proto__ || Object.getPrototypeOf(Profile)).call(this, props));\n\n    _this.state = {\n      displayName: '',\n      profileUrl: null,\n      bio: '',\n      loading: false,\n      found: false\n    };\n    var nearConfig = _this.props.nearConfig || window.nearConfig || {\n      networkId: 'default',\n      nodeUrl: 'https://rpc.nearprotocol.com',\n      walletUrl: 'https://wallet.nearprotocol.com'\n    };\n\n    if (!window.profileComponentCache) {\n      window.profileComponentCache = {\n        profileCache: {},\n        app: new _metanearSdkJs.MetaNearApp(profileAppId, null, nearConfig)\n      };\n      window.profileComponentCache.app.init();\n    }\n\n    _this.profileCache = window.profileComponentCache.profileCache;\n    _this.app = window.profileComponentCache.app;\n    return _this;\n  }\n\n  _createClass(Profile, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.props.accountId && this.app.init().then(function () {\n        return _this2.updateProfile(_this2.props.accountId);\n      });\n    }\n  }, {\n    key: 'fetchProfile',\n    value: function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(accountId) {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(accountId in this.profileCache)) {\n                  _context.next = 6;\n                  break;\n                }\n\n                _context.next = 3;\n                return this.profileCache[accountId];\n\n              case 3:\n                return _context.abrupt('return', _context.sent);\n\n              case 6:\n                console.log(\"Fetching profile for \" + accountId);\n                this.profileCache[accountId] = Promise.all([this.app.getFrom(accountId, 'displayName'), this.app.getFrom(accountId, 'profileUrl'), this.app.getFrom(accountId, 'bio')]).then(function (values) {\n                  return {\n                    accountId: accountId,\n                    displayName: values[0] || \"\",\n                    profileUrl: values[1],\n                    bio: values[2] || \"\"\n                  };\n                }).catch(function (e) {\n                  return false;\n                });\n                _context.next = 10;\n                return this.profileCache[accountId];\n\n              case 10:\n                return _context.abrupt('return', _context.sent);\n\n              case 11:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function fetchProfile(_x) {\n        return _ref.apply(this, arguments);\n      }\n\n      return fetchProfile;\n    }()\n  }, {\n    key: 'updateProfile',\n    value: function updateProfile(accountId) {\n      var _this3 = this;\n\n      this.setState({\n        displayName: \"\",\n        profileUrl: null,\n        bio: \"\",\n        loading: true,\n        found: false\n      });\n      this.fetchProfile(this.props.accountId).then(function (profile) {\n        if (profile) {\n          _this3.setState({\n            displayName: profile.displayName,\n            profileUrl: profile.profileUrl,\n            bio: profile.bio,\n            loading: false,\n            found: true\n          });\n        } else {\n          _this3.setState({\n            loading: false,\n            found: false\n          });\n        }\n        _this3.props.onFetch && _this3.props.onFetch(profile);\n      });\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      var _this4 = this;\n\n      if (this.props.accountId !== prevProps.accountId) {\n        this.app.init().then(function () {\n          return _this4.updateProfile(_this4.props.accountId);\n        });\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var displayName = this.props.displayName || this.state.displayName;\n      var profileUrl = this.props.profileUrl || this.state.profileUrl || this.props.defaultProfileUrl;\n      var bio = this.props.bio || this.state.bio;\n      var accountId = this.props.accountId;\n      var styles = this.props.styles;\n\n      return this.state.loading ? _react2.default.createElement(\n        'div',\n        { style: styles.profile },\n        _react2.default.createElement(\n          'div',\n          { className: 'spinner-grow', role: 'status' },\n          _react2.default.createElement(\n            'span',\n            { className: 'sr-only' },\n            'Loading...'\n          )\n        )\n      ) : this.state.found || this.props.forceShow ? _react2.default.createElement(\n        'div',\n        { style: styles.profile, title: bio },\n        _react2.default.createElement('img', { style: styles.profileImage, src: profileUrl, alt: 'Profile @' + accountId }),\n        _react2.default.createElement(\n          'span',\n          { style: styles.profileName },\n          _react2.default.createElement(\n            'span',\n            { style: styles.profileDisplayName },\n            displayName\n          ),\n          _react2.default.createElement(\n            'span',\n            { style: styles.profileAccountId },\n            \"(@\" + accountId + \")\"\n          )\n        )\n      ) : null;\n    }\n  }]);\n\n  return Profile;\n}(_react2.default.Component);\n\nProfile.propTypes = propTypes;\nProfile.defaultProps = defaultProps;\n\nexports.default = Profile;"],"sourceRoot":""}